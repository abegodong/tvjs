(function(f){var d,b,c={tv:function(){b.root.data("channel","");b.root.data("switchTo","");d.channels=[{}].concat(d.channels);b.content=b=f.extend({content:f("<div />").attr("id","tv_content").css({width:"100%",height:"100%"}).appendTo(b.root),help:f("<div />").attr("id","tv_help").addClass("tv_help tv_wrap").appendTo(b.root),guide:f("<div />").attr("id","tv_guide").addClass("tv_wrap").appendTo(b.root)},b);b.help.html(c.loadHelp());f(window).on("hashchange",function(){c.handleHashChange()});c.retrieveChannel();
    f(document).keypress(function(a){a=a.charCode;if(void 0!==a&&47<a&&58>a){clearTimeout(f.data(this,"timer"));var e=b.root.data("switchTo");if(48<a||""!==b.root.data("switchTo"))e=e.concat(a-48),b.root.data("switchTo",e);f(this).data("timer",setTimeout(function(){b.root.data("switchTo",b.root.data("switchTo")>>>0);window.location.hash=b.root.data("switchTo")},600))}(72===a||104===a)&&b.help.toggle();if(82===a||114===a)b.root.data("switchTo",b.root.data("channel")),c.loadChannel(!0);(67===a||99===a)&&
    c.loadGuide(b.root.data("channel"))});f(document).keyup(function(a){var e=b.root.data("channel")>>>0;27===a.keyCode?b.help.is(":visible")?b.help.toggle():window.location.hash="":(37===a.keyCode||40===a.keyCode)&&1<=e-1?c.channelDown():(39===a.keyCode||38===a.keyCode)&&d.channels.length>e+1&&c.channelUp()});f(window).resize(function(){b.root.data("switchTo",b.root.data("channel"));c.loadChannel(!1)})},loadIntro:function(){/webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)?b.content.html('<div class="tv_message">Change URL Hash to Channel Number to start streaming</div>'):
    b.content.html('<div class="tv_message">Press "H" for help and see channels listing or press a number key to start streaming</div>');document.title=d.name;c.storeChannel("");b.root.data("switchTo","")},loadError:function(a){b.content.html('<div class="tv_message tv_error">'+{1:'Invalid Channel! Please enter valid channel number<br />or press "H" for help and see channels listing.',2:"Sorry this channel is not currently available for mobile device!",3:"General Error! Please try reloading site."}[a]+
    "</div>");c.loadTitle("Error! Error code: "+a);b.root.data("switchTo","")},loadTitle:function(a){!0===d.useTitle&&(document.title=a)},loadHelp:function(){var a="<p>To start streaming: press your number key corresponding to the channel number below.</p>",a=a+"<DL>";f.each(d.channels,function(b,c){a+="<DT>"+b+"</DT>";a+="<DD>"+c.name+"</DD>"});a+="</DL>";return a+='<p>Press "H" or "ESC" to close this help menu.<br />Press "R" to reload channel</p>'},loadGuide:function(a){b.guide.html(d.channels[a].name).fadeIn(2E3).fadeOut(4E3)},
    loadChannel:function(a){var e=b.root.data("switchTo");/webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)?!0===d.mobileSupport&&""!==d.channels[e].mobile?(!0===a&&c.loadGuide(e),b.content.html('<video width="100%" height="100%" src="'+d.channels[e].mobile+'" />'),c.loadTitle(d.channels[e].name)):(c.loadError(2),e=""):(!0===a&&c.loadGuide(e),b.content.html('<embed wmode="transparent" width="100%" height="100%" allowfullscreen="true" allowscriptaccess="always" bgcolor="#000000" flashvars="src='+
        d.channels[e].url+'&amp;autoHideControlBar=true&amp;streamType=live&amp;autoPlay=true&amp;scaleMode=stretch" pluginspage="http://www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash" quality="medium" src="http://fpdownload.adobe.com/strobe/FlashMediaPlayback_101.swf?rnd=4/[[DYNAMIC]]/1" type="application/x-shockwave-flash">'),c.loadTitle(d.channels[e].name));b.root.data("channel",e);c.storeChannel(e);b.root.data("switchTo","")},handleHashChange:function(){var a=window.location.hash.substring(1);
        "null"===a&&(a=window.location.hash="");""===a?c.loadIntro():void 0===d.channels[a]?c.loadError(1):(b.root.data("channel",a),b.root.data("switchTo",a),c.loadChannel(!0))},channelUp:function(){var a=b.root.data("channel")>>>0;b.root.data("switchTo",a+1);window.location.hash=b.root.data("switchTo")},channelDown:function(){var a=b.root.data("channel")>>>0;b.root.data("switchTo",a-1);window.location.hash=b.root.data("switchTo")},storeChannel:function(a){!0===d.useLocalStorage&&"undefined"!==typeof Storage&&
    localStorage.setItem("tvChannel",a)},removeChannel:function(){!0===d.useLocalStorage&&"undefined"!==typeof Storage&&localStorage.removeItem("tvChannel")},retrieveChannel:function(){var a=window.location.hash.substring(1);!0===d.useLocalStorage&&"undefined"!==typeof Storage&&""===a&&"undefined"!==localStorage.tvChannel&&""!==localStorage.tvChannel?window.location.hash=localStorage.getItem("tvChannel"):c.handleHashChange()}};f.fn.tv=function(a){d=f.extend({name:"TV Streamer",mobileSupport:!0,useLocalStorage:!0,
    channels:[{}],defaultChannel:!1,autoPlay:!0,useTitle:!0},a);f(this).addClass("tvContainer");b=f.extend({root:f(this)},b);c.tv()}})(jQuery);